OUT:\n{"jsonrpc":"2.0","id":1,"result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"ddg-search","version":"1.26.0"}}}
{"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"search","description":"\n    Search DuckDuckGo and return formatted results.\n\n    Args:\n        query: The search query string\n        max_results: Maximum number of results to return (default: 10)\n        ctx: MCP context for logging\n    ","inputSchema":{"properties":{"query":{"title":"Query","type":"string"},"max_results":{"default":10,"title":"Max Results","type":"integer"}},"required":["query"],"title":"searchArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"searchOutput","type":"object"}},{"name":"fetch_content","description":"\n    Fetch and parse content from a webpage URL.\n\n    Args:\n        url: The webpage URL to fetch content from\n        ctx: MCP context for logging\n    ","inputSchema":{"properties":{"url":{"title":"Url","type":"string"}},"required":["url"],"title":"fetch_contentArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"fetch_contentOutput","type":"object"}}]}}
{"method":"notifications/message","params":{"level":"info","data":"Searching DuckDuckGo for: Python 3.13 new features"},"jsonrpc":"2.0"}
\nERR:\nC:\Program Files\Python311\Lib\site-packages\pydantic\plugin\_schema_validator.py:39: UserWarning: ImportError while loading the `logfire-plugin` Pydantic plugin, this plugin will not be installed.

ImportError("cannot import name 'LogData' from 'opentelemetry.sdk._logs' (C:\\Program Files\\Python311\\Lib\\site-packages\\opentelemetry\\sdk\\_logs\\__init__.py)")
  plugins = get_plugins()
[02/15/26 02:46:20] INFO     Processing request of type           server.py:720
                             ListToolsRequest                                  
                    INFO     Processing request of type           server.py:720
                             CallToolRequest                                   
[02/15/26 02:46:22] INFO     HTTP Request: POST                 _client.py:1740
                             https://html.duckduckgo.com/html                  
                             "HTTP/1.1 200 OK"                                 
Traceback (most recent call last):
  File "i:\api\discord\mcp\duckduckgo\src\duckduckgo_mcp_server\server.py", line 133, in search
    await ctx.info(f"Successfully found {len(results)} results")
  File "C:\Program Files\Python311\Lib\site-packages\mcp\server\fastmcp\server.py", line 1341, in info
    await self.log("info", message, **extra)
  File "C:\Program Files\Python311\Lib\site-packages\mcp\server\fastmcp\server.py", line 1278, in log
    await self.request_context.session.send_log_message(
  File "C:\Program Files\Python311\Lib\site-packages\mcp\server\session.py", line 213, in send_log_message
    await self.send_notification(
  File "C:\Program Files\Python311\Lib\site-packages\mcp\shared\session.py", line 335, in send_notification
    await self._write_stream.send(session_message)
  File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
  File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "i:\api\discord\mcp\duckduckgo\src\duckduckgo_mcp_server\server.py", line 225, in search
    results = await searcher.search(query, ctx, max_results)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "i:\api\discord\mcp\duckduckgo\src\duckduckgo_mcp_server\server.py", line 143, in search
    await ctx.error(f"Unexpected error during search: {str(e)}")
  File "C:\Program Files\Python311\Lib\site-packages\mcp\server\fastmcp\server.py", line 1349, in error
    await self.log("error", message, **extra)
  File "C:\Program Files\Python311\Lib\site-packages\mcp\server\fastmcp\server.py", line 1278, in log
    await self.request_context.session.send_log_message(
  File "C:\Program Files\Python311\Lib\site-packages\mcp\server\session.py", line 213, in send_log_message
    await self.send_notification(
  File "C:\Program Files\Python311\Lib\site-packages\mcp\shared\session.py", line 335, in send_notification
    await self._write_stream.send(session_message)
  File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
  File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError
  + Exception Group Traceback (most recent call last):
  |   File "i:\api\discord\mcp\duckduckgo\server.py", line 11, in <module>
  |     mcp.run()
  |   File "C:\Program Files\Python311\Lib\site-packages\mcp\server\fastmcp\server.py", line 296, in run
  |     anyio.run(self.run_stdio_async)
  |   File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\_core\_eventloop.py", line 74, in run
  |     return async_backend.run(func, args, {}, backend_options)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\_backends\_asyncio.py", line 2310, in run
  |     return runner.run(wrapper())
  |            ^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
  |     return self._loop.run_until_complete(task)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 654, in run_until_complete
  |     return future.result()
  |            ^^^^^^^^^^^^^^^
  |   File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\_backends\_asyncio.py", line 2298, in wrapper
  |     return await func(*args)
  |            ^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python311\Lib\site-packages\mcp\server\fastmcp\server.py", line 755, in run_stdio_async
  |     async with stdio_server() as (read_stream, write_stream):
  |   File "C:\Program Files\Python311\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(typ, value, traceback)
  |   File "C:\Program Files\Python311\Lib\site-packages\mcp\server\stdio.py", line 85, in stdio_server
  |     async with anyio.create_task_group() as tg:
  |   File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "C:\Program Files\Python311\Lib\site-packages\mcp\server\stdio.py", line 88, in stdio_server
    |     yield read_stream, write_stream
    |   File "C:\Program Files\Python311\Lib\site-packages\mcp\server\fastmcp\server.py", line 756, in run_stdio_async
    |     await self._mcp_server.run(
    |   File "C:\Program Files\Python311\Lib\site-packages\mcp\server\lowlevel\server.py", line 656, in run
    |     async with AsyncExitStack() as stack:
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 745, in __aexit__
    |     raise exc_details[1]
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 728, in __aexit__
    |     cb_suppress = await cb(*exc_details)
    |                   ^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Program Files\Python311\Lib\site-packages\mcp\shared\session.py", line 238, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
    |     raise BaseExceptionGroup(
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Exception Group Traceback (most recent call last):
      |   File "C:\Program Files\Python311\Lib\site-packages\mcp\server\lowlevel\server.py", line 673, in run
      |     async with anyio.create_task_group() as tg:
      |   File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
      |     raise BaseExceptionGroup(
      | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
      +-+---------------- 1 ----------------
        | Traceback (most recent call last):
        |   File "C:\Program Files\Python311\Lib\site-packages\mcp\server\lowlevel\server.py", line 696, in _handle_message
        |     await self._handle_request(message, req, session, lifespan_context, raise_exceptions)
        |   File "C:\Program Files\Python311\Lib\site-packages\mcp\server\lowlevel\server.py", line 781, in _handle_request
        |     await message.respond(response)
        |   File "C:\Program Files\Python311\Lib\site-packages\mcp\shared\session.py", line 134, in respond
        |     await self._session._send_response(  # type: ignore[reportPrivateUsage]
        |   File "C:\Program Files\Python311\Lib\site-packages\mcp\shared\session.py", line 349, in _send_response
        |     await self._write_stream.send(session_message)
        |   File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\streams\memory.py", line 242, in send
        |     self.send_nowait(item)
        |   File "C:\Users\20517\AppData\Roaming\Python\Python311\site-packages\anyio\streams\memory.py", line 211, in send_nowait
        |     raise ClosedResourceError
        | anyio.ClosedResourceError
        +------------------------------------
